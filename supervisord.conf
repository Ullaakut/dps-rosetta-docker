[supervisord]
nodaemon=true
user=root

# mainnet 3 and 4 are currently not working properly

# [program:mainnet-3]
# command=/bin/rosetta-mainnet-3 -c flow-mainnet -p 8003 -i /data/mainnet-3

# [program:mainnet-4]
# command=/bin/rosetta-mainnet-4 -c flow-mainnet -p 8004 -i /data/mainnet-4

# [program:mainnet-5]
# command=/bin/rosetta-mainnet-5 -c flow-mainnet -p 8005 -i /data/mainnet-5
# stdout_logfile=/dev/stdout
# stdout_logfile_maxbytes=0
#
# [program:mainnet-6]
# command=/bin/rosetta-mainnet-6 -c flow-mainnet -p 8006 -i /data/mainnet-6
# stdout_logfile=/dev/stdout
# stdout_logfile_maxbytes=0
#
# [program:mainnet-7]
# command=/bin/rosetta-mainnet-7 -c flow-mainnet -p 8007 -i /data/mainnet-7
# stdout_logfile=/dev/stdout
# stdout_logfile_maxbytes=0
#
# [program:mainnet-8]
# command=/bin/rosetta-mainnet-8 -c flow-mainnet -p 8008 -i /data/mainnet-8
#
# [program:mainnet-9]
# command=/bin/rosetta-mainnet-9 -c flow-mainnet -p 8009 -i /data/mainnet-9
#

[program:live-index]
command=/bin/app-index -c flow-mainnet -p 8099
    -i /data/live/index
    -b /data/live/bootstrap
    -c /data/live/root.checkpoint
    -d /data/live/data
    --seed-address="access-001.canary8.nodes.onflow.org:3569"
    --seed-key="210c5aae4b72feb1ee16a84d165e386350e4556e731c132f729c761fbf686f73c4927cbcbb22e464da67354a3ce647673bdb733dca129e3df96d82fb8ae94c00"
#

[program:live-rosetta]
command=/bin/app-rosetta -c flow-mainnet -p 8080 -a localhost:8099 -c access.canary.nodes.onflow.org:9000
#

[eventlistener:processes]
command=bash -c "printf 'READY\n' && while read line; do kill -SIGQUIT $PPID; done < /dev/stdin"
events=PROCESS_STATE_STOPPED,PROCESS_STATE_EXITED,PROCESS_STATE_FATAL

# mainnet full
# [program:rosetta-dispatcher]
# command=/bin/rosetta-dispatcher-server --spork-addresses="http://localhost:8003,http://localhost:8004,http://localhost:8005,http://localhost:8006,http://localhost:8007,http://localhost:8008,http://localhost:8009"
#                                        --spork-firsts="9737133,9992020,12020337,12609237,13404174,13950742,14892104"
#                                        --spork-lasts="9992019,12020336,12609236,13404173,13950741,14892103,15791890"
# mainnet 5, 6, 7
# [program:rosetta-dispatcher]
# command=/bin/rosetta-dispatcher-server --spork-addresses="http://localhost:8005,http://localhost:8006,http://localhost:8007"
#                                        --spork-firsts="12020337,12609237,13404174"
#                                        --spork-lasts="12609236,13404173,13950741"
# stdout_logfile=/dev/stdout
# stdout_logfile_maxbytes=0

# single spork doesn't need a dispatcher
# [program:rosetta-dispatcher]
# command=/bin/rosetta-dispatcher-server --spork-addresses="http://localhost:8003,http://localhost:8004"
#                                        --spork-firsts="17756122,22333314"
#                                         --spork-lasts="22333313,25450389"